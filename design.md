### 设计目标（Design Goals）

1. **支持大模型驱动的软件自动生成与自动编译**
   系统以大模型作为主要的代码生成与演化引擎，在极低或无人工参与的情况下完成组件生成、升级与维护。

2. **显式建模组件及其依赖关系**
   系统中会生成大量组件，组件之间存在复杂依赖关系。需要通过一种统一的抽象方式，对组件之间的关系进行明确描述，而不是依赖隐式约定或运行期行为。

3. **支持多种组件交互模式的统一抽象**
   组件之间的接口关系可能包括但不限于：

* 单向接口
* 双向接口
* Reactive（数据变化触发联动变化）
* 共享状态（bulletin board）
* 消息队列 / 消息总线
  系统需要一种通用的表达能力，对这些交互模式进行合理抽象。

4. **通过类型系统约束组件交互与演化**
   引入强表达能力的类型系统，用于描述组件接口及组件间关系。
   当组件升级导致接口类型发生变化且破坏兼容性时，系统应在编译阶段检测并显式失败，而不是在运行期暴露问题。

5. **支持组件级与系统级的可测试性**
   在架构层面保证：

* 单个组件可以在隔离条件下被独立测试
* 多组件组合后整体系统仍然可测试
  测试是系统正确性与质量的核心保障机制。

6. **支持自动化升级与自我修复能力**
   当接口类型变化引发编译错误时，系统应支持：

* 由用户介入选择修复策略，或
* 由大模型自动执行组件升级或适配
  从而使系统持续处于可维护、可演化的状态。

7. **在大模型生成过程中控制上下文规模**
   在 coding agent 生成代码时，仅注入与当前组件类型及其约束规则匹配的规则集合，而非引入全局所有规则，以避免上下文过大导致模型性能下降。

8. **以组件局部正确性支撑整体系统可控性**
   通过保证每个组件在明确类型约束下的正确性，使整体系统的类型关系与结构演化保持在可控范围内。

9. **以测试驱动质量而非人工审查**
   虽然整体流程在形式上接近瀑布式开发，但内部包含由大模型承担的高频自动测试与验证过程，通过测试持续保证系统质量。

10. **将安全与漏洞信息纳入自动化质量保障体系**
    系统可结合外部漏洞信息（如 CVE 数据库），使大模型在生成与升级代码时具备对已知安全风险的感知能力，从而进一步提升软件质量。

---

### 设计约束（Design Constraints）

1. **组件关系必须具备形式化、可验证的描述方式**
   组件之间的接口、依赖和交互模式必须通过显式描述语言或中间表示进行建模，避免隐式耦合。

2. **接口与关系约束必须在编译阶段可检查**
   类型不兼容、关系破坏等问题应尽可能在编译阶段暴露，而不是推迟到运行期。

3. **规则与约束需支持按组件类型精确匹配**
   用于约束组件生成的规则应具备可选择性，仅在匹配组件类型、接口类型或交互模式时被注入生成上下文。

4. **系统整体一致性不依赖单次全局上下文注入**
   不得假设大模型在一次生成中能够理解完整系统状态；整体一致性应通过类型系统、编译检查和测试机制逐步收敛。

5. **自动升级过程必须受类型约束与测试约束限制**
   即使由大模型执行自动升级，也必须遵循既定的类型约束和测试门槛，避免不可控的全局修改。

6. **测试是质量保证的主要手段**
   系统不依赖人工代码评审来保证正确性，测试结果是判断系统是否可接受的核心依据。

7. **系统设计需适应大模型无人工成本但有限上下文的特性**
   架构需充分考虑大模型“生成成本低但上下文受限”的现实约束，并以此为前提设计规则注入与生成策略。
